<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="CLI Copilot">

<title>Titanic Survival: Gender x SES Interaction with Age, Family Structure, and Embarkation Mediation/Pathways</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/clipboard/clipboard.min.js"></script>
<script src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/quarto-html/popper.min.js"></script>
<script src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/quarto-html/anchor.min.js"></script>
<link href="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#eda-distributions-and-missingness" id="toc-eda-distributions-and-missingness" class="nav-link active" data-scroll-target="#eda-distributions-and-missingness"><span class="header-section-number">1</span> EDA: Distributions and Missingness</a></li>
  <li><a href="#relationship-survival-vs-gender-x-ses" id="toc-relationship-survival-vs-gender-x-ses" class="nav-link" data-scroll-target="#relationship-survival-vs-gender-x-ses"><span class="header-section-number">2</span> Relationship: Survival vs Gender x SES</a></li>
  <li><a href="#statistical-modeling" id="toc-statistical-modeling" class="nav-link" data-scroll-target="#statistical-modeling"><span class="header-section-number">3</span> Statistical Modeling</a>
  <ul class="collapse">
  <li><a href="#interaction-interpretation" id="toc-interaction-interpretation" class="nav-link" data-scroll-target="#interaction-interpretation"><span class="header-section-number">3.1</span> Interaction interpretation</a></li>
  <li><a href="#mediation-pathway-assessment" id="toc-mediation-pathway-assessment" class="nav-link" data-scroll-target="#mediation-pathway-assessment"><span class="header-section-number">3.2</span> Mediation / pathway assessment</a></li>
  </ul></li>
  <li><a href="#highest-risk-age-group" id="toc-highest-risk-age-group" class="nav-link" data-scroll-target="#highest-risk-age-group"><span class="header-section-number">4</span> Highest-risk age group</a></li>
  <li><a href="#generalisation-check-train-vs-test" id="toc-generalisation-check-train-vs-test" class="nav-link" data-scroll-target="#generalisation-check-train-vs-test"><span class="header-section-number">5</span> Generalisation check: Train vs Test</a></li>
  <li><a href="#narrative-and-interpretation" id="toc-narrative-and-interpretation" class="nav-link" data-scroll-target="#narrative-and-interpretation"><span class="header-section-number">6</span> Narrative and Interpretation</a></li>
  <li><a href="#reproducibility" id="toc-reproducibility" class="nav-link" data-scroll-target="#reproducibility"><span class="header-section-number">7</span> Reproducibility</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Titanic Survival: Gender x SES Interaction with Age, Family Structure, and Embarkation Mediation/Pathways</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>CLI Copilot </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nnet)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>train_path <span class="ot">&lt;-</span> <span class="st">"/Users/patrickl/Developer/Personal-Repo/cli_poc_ml_project/data/train.csv"</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>test_path  <span class="ot">&lt;-</span> <span class="st">"/Users/patrickl/Developer/Personal-Repo/cli_poc_ml_project/data/test.csv"</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(train_path)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>test  <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(test_path)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Harmonize column names to lower-case</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(train) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(train))</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(test)  <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(test))</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature engineering</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">pclass =</span> <span class="fu">factor</span>(pclass, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1st"</span>,<span class="st">"2nd"</span>,<span class="st">"3rd"</span>)),</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">factor</span>(sex),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">embarked =</span> <span class="fu">factor</span>(embarked),</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"0-4"</span>,</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">5</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">13</span> <span class="sc">~</span> <span class="st">"5-12"</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">13</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"13-17"</span>,</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">18</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"18-29"</span>,</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">30</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">45</span> <span class="sc">~</span> <span class="st">"30-44"</span>,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">45</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">"45-59"</span>,</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">60</span> <span class="sc">~</span> <span class="st">"60+"</span>,</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">factor</span>(age_group, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"0-4"</span>,<span class="st">"5-12"</span>,<span class="st">"13-17"</span>,<span class="st">"18-29"</span>,<span class="st">"30-44"</span>,<span class="st">"45-59"</span>,<span class="st">"60+"</span>)),</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">family_size =</span> <span class="fu">coalesce</span>(sibsp, <span class="dv">0</span>) <span class="sc">+</span> <span class="fu">coalesce</span>(parch, <span class="dv">0</span>),</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">family_structure =</span> <span class="fu">case_when</span>(</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>      family_size <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"solo"</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>      family_size <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"pair"</span>,</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>      family_size <span class="sc">&gt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"3+"</span>,</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">family_structure =</span> <span class="fu">factor</span>(family_structure, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"solo"</span>,<span class="st">"pair"</span>,<span class="st">"3+"</span>))</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="co"># EDA: structure</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>skim_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">column =</span> <span class="fu">names</span>(train),</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">class  =</span> <span class="fu">map_chr</span>(train, <span class="sc">~</span> <span class="fu">class</span>(.x)[<span class="dv">1</span>]),</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">n_missing =</span> <span class="fu">map_int</span>(train, <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.x)), ),</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">distinct =</span> <span class="fu">map_int</span>(train, <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">n_distinct</span>(.x))</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>skim_tbl <span class="sc">%&gt;%</span> <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Training Data Structure and Missingness"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="rkjbwemdsk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rkjbwemdsk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rkjbwemdsk thead, #rkjbwemdsk tbody, #rkjbwemdsk tfoot, #rkjbwemdsk tr, #rkjbwemdsk td, #rkjbwemdsk th {
  border-style: none;
}

#rkjbwemdsk p {
  margin: 0;
  padding: 0;
}

#rkjbwemdsk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rkjbwemdsk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rkjbwemdsk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rkjbwemdsk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rkjbwemdsk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rkjbwemdsk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rkjbwemdsk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rkjbwemdsk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rkjbwemdsk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rkjbwemdsk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rkjbwemdsk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rkjbwemdsk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rkjbwemdsk .gt_spanner_row {
  border-bottom-style: hidden;
}

#rkjbwemdsk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rkjbwemdsk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rkjbwemdsk .gt_from_md > :first-child {
  margin-top: 0;
}

#rkjbwemdsk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rkjbwemdsk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rkjbwemdsk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rkjbwemdsk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rkjbwemdsk .gt_row_group_first td {
  border-top-width: 2px;
}

#rkjbwemdsk .gt_row_group_first th {
  border-top-width: 2px;
}

#rkjbwemdsk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkjbwemdsk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rkjbwemdsk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rkjbwemdsk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rkjbwemdsk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkjbwemdsk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rkjbwemdsk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rkjbwemdsk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rkjbwemdsk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rkjbwemdsk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rkjbwemdsk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkjbwemdsk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rkjbwemdsk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rkjbwemdsk .gt_left {
  text-align: left;
}

#rkjbwemdsk .gt_center {
  text-align: center;
}

#rkjbwemdsk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rkjbwemdsk .gt_font_normal {
  font-weight: normal;
}

#rkjbwemdsk .gt_font_bold {
  font-weight: bold;
}

#rkjbwemdsk .gt_font_italic {
  font-style: italic;
}

#rkjbwemdsk .gt_super {
  font-size: 65%;
}

#rkjbwemdsk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rkjbwemdsk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rkjbwemdsk .gt_indent_1 {
  text-indent: 5px;
}

#rkjbwemdsk .gt_indent_2 {
  text-indent: 10px;
}

#rkjbwemdsk .gt_indent_3 {
  text-indent: 15px;
}

#rkjbwemdsk .gt_indent_4 {
  text-indent: 20px;
}

#rkjbwemdsk .gt_indent_5 {
  text-indent: 25px;
}

#rkjbwemdsk .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rkjbwemdsk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">Training Data Structure and Missingness</th>
</tr>
<tr class="gt_col_headings even">
<th id="column" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">column</th>
<th id="class" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">class</th>
<th id="n_missing" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n_missing</th>
<th id="distinct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">distinct</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="column">passengerid</td>
<td class="gt_row gt_left" headers="class">numeric</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">891</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="column">survived</td>
<td class="gt_row gt_left" headers="class">numeric</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">2</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="column">pclass</td>
<td class="gt_row gt_left" headers="class">factor</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">3</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="column">name</td>
<td class="gt_row gt_left" headers="class">character</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">891</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="column">sex</td>
<td class="gt_row gt_left" headers="class">factor</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="column">age</td>
<td class="gt_row gt_left" headers="class">numeric</td>
<td class="gt_row gt_right" headers="n_missing">177</td>
<td class="gt_row gt_right" headers="distinct">89</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="column">sibsp</td>
<td class="gt_row gt_left" headers="class">numeric</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="column">parch</td>
<td class="gt_row gt_left" headers="class">numeric</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="column">ticket</td>
<td class="gt_row gt_left" headers="class">character</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">681</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="column">fare</td>
<td class="gt_row gt_left" headers="class">numeric</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">248</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="column">cabin</td>
<td class="gt_row gt_left" headers="class">character</td>
<td class="gt_row gt_right" headers="n_missing">687</td>
<td class="gt_row gt_right" headers="distinct">148</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="column">embarked</td>
<td class="gt_row gt_left" headers="class">factor</td>
<td class="gt_row gt_right" headers="n_missing">2</td>
<td class="gt_row gt_right" headers="distinct">4</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="column">age_group</td>
<td class="gt_row gt_left" headers="class">factor</td>
<td class="gt_row gt_right" headers="n_missing">177</td>
<td class="gt_row gt_right" headers="distinct">8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="column">family_size</td>
<td class="gt_row gt_left" headers="class">numeric</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="column">family_structure</td>
<td class="gt_row gt_left" headers="class">factor</td>
<td class="gt_row gt_right" headers="n_missing">0</td>
<td class="gt_row gt_right" headers="distinct">3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="eda-distributions-and-missingness" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> EDA: Distributions and Missingness</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Missingness by column</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>miss_df <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.))), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"column"</span>, <span class="at">values_to =</span> <span class="st">"n_missing"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frac_missing =</span> n_missing <span class="sc">/</span> <span class="fu">nrow</span>(train))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>miss_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(miss_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(column, frac_missing), <span class="at">y =</span> frac_missing)) <span class="sc">+</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"#1f77b4"</span>) <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Column"</span>, <span class="at">y =</span> <span class="st">"% Missing"</span>, <span class="at">title =</span> <span class="st">"Missingness by Column (Train)"</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>age_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(train, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">fill =</span> survived <span class="sc">%&gt;%</span> <span class="fu">factor</span>())) <span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">bins =</span> <span class="dv">30</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>, <span class="at">name =</span> <span class="st">"Survived"</span>) <span class="sc">+</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Distribution Colored by Survival"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>pclass_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(train, <span class="fu">aes</span>(<span class="at">x =</span> pclass, <span class="at">fill =</span> survived <span class="sc">%&gt;%</span> <span class="fu">factor</span>())) <span class="sc">+</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_fill</span>()) <span class="sc">+</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>, <span class="at">name =</span> <span class="st">"Survived"</span>) <span class="sc">+</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Survival Rate by Ticket Class (SES)"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>sex_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(train, <span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">fill =</span> survived <span class="sc">%&gt;%</span> <span class="fu">factor</span>())) <span class="sc">+</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_fill</span>()) <span class="sc">+</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>, <span class="at">name =</span> <span class="st">"Survived"</span>) <span class="sc">+</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Survival Rate by Gender"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>embark_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(train, <span class="fu">aes</span>(<span class="at">x =</span> embarked, <span class="at">fill =</span> survived <span class="sc">%&gt;%</span> <span class="fu">factor</span>())) <span class="sc">+</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_fill</span>()) <span class="sc">+</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>, <span class="at">name =</span> <span class="st">"Survived"</span>) <span class="sc">+</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Survival Rate by Embarkation Port"</span>, <span class="at">y =</span> <span class="st">"Proportion"</span>)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>(age_plot <span class="sc">/</span> (sex_plot <span class="sc">|</span> pclass_plot <span class="sc">|</span> embark_plot)) <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Core Distributions and Survival Relationships"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="relationship-survival-vs-gender-x-ses" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Relationship: Survival vs Gender x SES</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Survival rates by gender and class</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>surv_rates <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(survived)) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, pclass) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_survived =</span> <span class="fu">sum</span>(survived <span class="sc">==</span> <span class="dv">1</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">rate =</span> n_survived <span class="sc">/</span> n,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(surv_rates, <span class="fu">aes</span>(pclass, rate, <span class="at">color =</span> sex, <span class="at">group =</span> sex)) <span class="sc">+</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Survival Probability by Gender x SES (Class)"</span>, <span class="at">x =</span> <span class="st">"Ticket Class (SES)"</span>, <span class="at">y =</span> <span class="st">"Survival Probability"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="statistical-modeling" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Statistical Modeling</h1>
<p>We use logistic regression on survival with gender, SES (pclass), and their interaction. We incorporate age, family structure, and embarkation first as covariates, then assess potential mediation/pathway effects via sequential adjustment and indirect effect decomposition (noting that true mediation would require stronger identification assumptions).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data: remove rows missing key fields</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>model_df <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(survived), <span class="sc">!</span><span class="fu">is.na</span>(sex), <span class="sc">!</span><span class="fu">is.na</span>(pclass)) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">embarked =</span> <span class="fu">fct_explicit_na</span>(embarked, <span class="st">"Unknown"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Base interaction model: survived ~ sex * pclass</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>m0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(survived <span class="sc">~</span> sex <span class="sc">*</span> pclass, <span class="at">data =</span> model_df, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Add mediators/covariates</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(survived <span class="sc">~</span> sex <span class="sc">*</span> pclass <span class="sc">+</span> age <span class="sc">+</span> family_structure <span class="sc">+</span> embarked, <span class="at">data =</span> model_df, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(m0) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">"Base: sex * pclass"</span>),</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(m1) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">"Adjusted: + age + family_structure + embarked"</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">or =</span> <span class="fu">exp</span>(estimate)) <span class="sc">%&gt;%</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, term, estimate, std.error, statistic, p.value, or) <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(model, term) <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Logistic Regression on Survival"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="rejhimpbzb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rejhimpbzb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rejhimpbzb thead, #rejhimpbzb tbody, #rejhimpbzb tfoot, #rejhimpbzb tr, #rejhimpbzb td, #rejhimpbzb th {
  border-style: none;
}

#rejhimpbzb p {
  margin: 0;
  padding: 0;
}

#rejhimpbzb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rejhimpbzb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rejhimpbzb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rejhimpbzb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rejhimpbzb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rejhimpbzb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rejhimpbzb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rejhimpbzb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rejhimpbzb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rejhimpbzb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rejhimpbzb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rejhimpbzb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rejhimpbzb .gt_spanner_row {
  border-bottom-style: hidden;
}

#rejhimpbzb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rejhimpbzb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rejhimpbzb .gt_from_md > :first-child {
  margin-top: 0;
}

#rejhimpbzb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rejhimpbzb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rejhimpbzb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rejhimpbzb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rejhimpbzb .gt_row_group_first td {
  border-top-width: 2px;
}

#rejhimpbzb .gt_row_group_first th {
  border-top-width: 2px;
}

#rejhimpbzb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rejhimpbzb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rejhimpbzb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rejhimpbzb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rejhimpbzb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rejhimpbzb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rejhimpbzb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rejhimpbzb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rejhimpbzb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rejhimpbzb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rejhimpbzb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rejhimpbzb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rejhimpbzb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rejhimpbzb .gt_left {
  text-align: left;
}

#rejhimpbzb .gt_center {
  text-align: center;
}

#rejhimpbzb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rejhimpbzb .gt_font_normal {
  font-weight: normal;
}

#rejhimpbzb .gt_font_bold {
  font-weight: bold;
}

#rejhimpbzb .gt_font_italic {
  font-style: italic;
}

#rejhimpbzb .gt_super {
  font-size: 65%;
}

#rejhimpbzb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rejhimpbzb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rejhimpbzb .gt_indent_1 {
  text-indent: 5px;
}

#rejhimpbzb .gt_indent_2 {
  text-indent: 10px;
}

#rejhimpbzb .gt_indent_3 {
  text-indent: 15px;
}

#rejhimpbzb .gt_indent_4 {
  text-indent: 20px;
}

#rejhimpbzb .gt_indent_5 {
  text-indent: 25px;
}

#rejhimpbzb .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rejhimpbzb div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="7" class="gt_heading gt_title gt_font_normal gt_bottom_border">Logistic Regression on Survival</th>
</tr>
<tr class="gt_col_headings even">
<th id="model" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">model</th>
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">term</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="std.error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">std.error</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">statistic</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p.value</th>
<th id="or" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">or</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">5.2768594</td>
<td class="gt_row gt_right" headers="std.error">0.7468894</td>
<td class="gt_row gt_right" headers="statistic">7.06511531</td>
<td class="gt_row gt_right" headers="p.value">1.604827e-12</td>
<td class="gt_row gt_right" headers="or">1.957541e+02</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">age</td>
<td class="gt_row gt_right" headers="estimate">-0.0420287</td>
<td class="gt_row gt_right" headers="std.error">0.0086979</td>
<td class="gt_row gt_right" headers="statistic">-4.83205196</td>
<td class="gt_row gt_right" headers="p.value">1.351330e-06</td>
<td class="gt_row gt_right" headers="or">9.588423e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">embarkedQ</td>
<td class="gt_row gt_right" headers="estimate">-0.7288561</td>
<td class="gt_row gt_right" headers="std.error">0.5605551</td>
<td class="gt_row gt_right" headers="statistic">-1.30023985</td>
<td class="gt_row gt_right" headers="p.value">1.935188e-01</td>
<td class="gt_row gt_right" headers="or">4.824606e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">embarkedS</td>
<td class="gt_row gt_right" headers="estimate">-0.5464437</td>
<td class="gt_row gt_right" headers="std.error">0.2725712</td>
<td class="gt_row gt_right" headers="statistic">-2.00477427</td>
<td class="gt_row gt_right" headers="p.value">4.498718e-02</td>
<td class="gt_row gt_right" headers="or">5.790053e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">embarkedUnknown</td>
<td class="gt_row gt_right" headers="estimate">11.4667587</td>
<td class="gt_row gt_right" headers="std.error">609.9972542</td>
<td class="gt_row gt_right" headers="statistic">0.01879805</td>
<td class="gt_row gt_right" headers="p.value">9.850022e-01</td>
<td class="gt_row gt_right" headers="or">9.548827e+04</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">family_structure3+</td>
<td class="gt_row gt_right" headers="estimate">-0.1123664</td>
<td class="gt_row gt_right" headers="std.error">0.2616097</td>
<td class="gt_row gt_right" headers="statistic">-0.42951905</td>
<td class="gt_row gt_right" headers="p.value">6.675455e-01</td>
<td class="gt_row gt_right" headers="or">8.937168e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">family_structurepair</td>
<td class="gt_row gt_right" headers="estimate">-0.1462345</td>
<td class="gt_row gt_right" headers="std.error">0.2850553</td>
<td class="gt_row gt_right" headers="statistic">-0.51300406</td>
<td class="gt_row gt_right" headers="p.value">6.079485e-01</td>
<td class="gt_row gt_right" headers="or">8.639551e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-0.9335109</td>
<td class="gt_row gt_right" headers="std.error">0.7415000</td>
<td class="gt_row gt_right" headers="statistic">-1.25894923</td>
<td class="gt_row gt_right" headers="p.value">2.080487e-01</td>
<td class="gt_row gt_right" headers="or">3.931709e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-3.9778305</td>
<td class="gt_row gt_right" headers="std.error">0.6560489</td>
<td class="gt_row gt_right" headers="statistic">-6.06331402</td>
<td class="gt_row gt_right" headers="p.value">1.333450e-09</td>
<td class="gt_row gt_right" headers="or">1.872622e-02</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="estimate">-3.5916385</td>
<td class="gt_row gt_right" headers="std.error">0.6322825</td>
<td class="gt_row gt_right" headers="statistic">-5.68043282</td>
<td class="gt_row gt_right" headers="p.value">1.343543e-08</td>
<td class="gt_row gt_right" headers="or">2.755315e-02</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-0.7656067</td>
<td class="gt_row gt_right" headers="std.error">0.8182601</td>
<td class="gt_row gt_right" headers="statistic">-0.93565205</td>
<td class="gt_row gt_right" headers="p.value">3.494524e-01</td>
<td class="gt_row gt_right" headers="or">4.650517e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Adjusted: + age + family_structure + embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">2.1174965</td>
<td class="gt_row gt_right" headers="std.error">0.6878429</td>
<td class="gt_row gt_right" headers="statistic">3.07845966</td>
<td class="gt_row gt_right" headers="p.value">2.080737e-03</td>
<td class="gt_row gt_right" headers="or">8.310307e+00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Base: sex * pclass</td>
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">3.4122472</td>
<td class="gt_row gt_right" headers="std.error">0.5867893</td>
<td class="gt_row gt_right" headers="statistic">5.81511520</td>
<td class="gt_row gt_right" headers="p.value">6.059214e-09</td>
<td class="gt_row gt_right" headers="or">3.033333e+01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Base: sex * pclass</td>
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-0.9555114</td>
<td class="gt_row gt_right" headers="std.error">0.7247579</td>
<td class="gt_row gt_right" headers="statistic">-1.31838705</td>
<td class="gt_row gt_right" headers="p.value">1.873741e-01</td>
<td class="gt_row gt_right" headers="or">3.846154e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Base: sex * pclass</td>
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-3.4122472</td>
<td class="gt_row gt_right" headers="std.error">0.6099995</td>
<td class="gt_row gt_right" headers="statistic">-5.59385220</td>
<td class="gt_row gt_right" headers="p.value">2.220860e-08</td>
<td class="gt_row gt_right" headers="or">3.296703e-02</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Base: sex * pclass</td>
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="estimate">-3.9493901</td>
<td class="gt_row gt_right" headers="std.error">0.6160608</td>
<td class="gt_row gt_right" headers="statistic">-6.41071510</td>
<td class="gt_row gt_right" headers="p.value">1.448386e-10</td>
<td class="gt_row gt_right" headers="or">1.926645e-02</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="model">Base: sex * pclass</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-0.1849918</td>
<td class="gt_row gt_right" headers="std.error">0.7939117</td>
<td class="gt_row gt_right" headers="statistic">-0.23301304</td>
<td class="gt_row gt_right" headers="p.value">8.157513e-01</td>
<td class="gt_row gt_right" headers="or">8.311111e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="model">Base: sex * pclass</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">2.0957553</td>
<td class="gt_row gt_right" headers="std.error">0.6572051</td>
<td class="gt_row gt_right" headers="statistic">3.18889059</td>
<td class="gt_row gt_right" headers="p.value">1.428199e-03</td>
<td class="gt_row gt_right" headers="or">8.131580e+00</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="interaction-interpretation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="interaction-interpretation"><span class="header-section-number">3.1</span> Interaction interpretation</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Marginal effects and predicted probabilities across class by sex</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>newdata <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>sex),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pclass =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>pclass),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">median</span>(model_df<span class="sc">$</span>age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">family_structure =</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"solo"</span>,<span class="st">"pair"</span>,<span class="st">"3+"</span>), <span class="at">levels =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>family_structure))[<span class="dv">1</span>],</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">embarked =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>embarked)[<span class="dv">1</span>]</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>preds <span class="ot">&lt;-</span> newdata <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">p0 =</span> <span class="fu">plogis</span>(<span class="fu">predict</span>(m0, <span class="at">newdata =</span> newdata, <span class="at">type =</span> <span class="st">"link"</span>)),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">p1 =</span> <span class="fu">plogis</span>(<span class="fu">predict</span>(m1, <span class="at">newdata =</span> newdata, <span class="at">type =</span> <span class="st">"link"</span>))</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>preds_long <span class="ot">&lt;-</span> preds <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex, pclass, p0, p1) <span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(p0, p1), <span class="at">names_to =</span> <span class="st">"model"</span>, <span class="at">values_to =</span> <span class="st">"pred_prob"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">recode</span>(model, <span class="at">p0 =</span> <span class="st">"Base"</span>, <span class="at">p1 =</span> <span class="st">"Adjusted"</span>))</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(preds_long, <span class="fu">aes</span>(pclass, pred_prob, <span class="at">color =</span> sex, <span class="at">group =</span> sex)) <span class="sc">+</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> model) <span class="sc">+</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Predicted Survival Probability by Gender x Class"</span>, <span class="at">y =</span> <span class="st">"Predicted Probability"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mediation-pathway-assessment" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="mediation-pathway-assessment"><span class="header-section-number">3.2</span> Mediation / pathway assessment</h2>
<p>We assess whether age, family structure, and embarkation may carry part of the effect of gender and SES on survival using a pragmatic approach:</p>
<ul>
<li>Compare estimates from m0 (without mediators) to m1 (with mediators). Attenuation suggests potential mediated pathways.</li>
<li>Model each mediator as a function of gender and SES to examine associations that enable mediation.</li>
<li>Use product-of-coefficients for a rough indirect effect signal (caveat: mixed types, non-linear link; interpret qualitatively).</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Associations enabling mediation</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>age_m <span class="ot">&lt;-</span> <span class="fu">lm</span>(age <span class="sc">~</span> sex <span class="sc">*</span> pclass, <span class="at">data =</span> model_df)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>family_m <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="fu">I</span>(family_structure <span class="sc">==</span> <span class="st">"3+"</span>) <span class="sc">~</span> sex <span class="sc">*</span> pclass, <span class="at">data =</span> model_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(family_structure)), <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>embark_m <span class="ot">&lt;-</span> multinom_model <span class="ot">&lt;-</span> nnet<span class="sc">::</span><span class="fu">multinom</span>(embarked <span class="sc">~</span> sex <span class="sc">*</span> pclass, <span class="at">data =</span> model_df) <span class="co"># requires nnet</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># weights:  28 (18 variable)
initial  value 1235.188276 
iter  10 value 646.491448
iter  20 value 615.085631
iter  30 value 614.005873
final  value 613.990669 
converged</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>med_assoc_tbl <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(age_m) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mediator =</span> <span class="st">"age"</span>),</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(family_m) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mediator =</span> <span class="st">"family(3+)"</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>(multinom_model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">mediator =</span> <span class="st">"embarked"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(mediator, term, estimate, std.error, p.value) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(mediator, term)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>med_assoc_tbl <span class="sc">%&gt;%</span> <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Mediator Associations with Gender x Class"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="kdardaenxb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kdardaenxb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kdardaenxb thead, #kdardaenxb tbody, #kdardaenxb tfoot, #kdardaenxb tr, #kdardaenxb td, #kdardaenxb th {
  border-style: none;
}

#kdardaenxb p {
  margin: 0;
  padding: 0;
}

#kdardaenxb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kdardaenxb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kdardaenxb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kdardaenxb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kdardaenxb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdardaenxb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdardaenxb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdardaenxb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kdardaenxb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kdardaenxb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kdardaenxb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kdardaenxb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kdardaenxb .gt_spanner_row {
  border-bottom-style: hidden;
}

#kdardaenxb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kdardaenxb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kdardaenxb .gt_from_md > :first-child {
  margin-top: 0;
}

#kdardaenxb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kdardaenxb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kdardaenxb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kdardaenxb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kdardaenxb .gt_row_group_first td {
  border-top-width: 2px;
}

#kdardaenxb .gt_row_group_first th {
  border-top-width: 2px;
}

#kdardaenxb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdardaenxb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kdardaenxb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kdardaenxb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdardaenxb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdardaenxb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kdardaenxb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kdardaenxb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kdardaenxb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdardaenxb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdardaenxb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdardaenxb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdardaenxb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdardaenxb .gt_left {
  text-align: left;
}

#kdardaenxb .gt_center {
  text-align: center;
}

#kdardaenxb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kdardaenxb .gt_font_normal {
  font-weight: normal;
}

#kdardaenxb .gt_font_bold {
  font-weight: bold;
}

#kdardaenxb .gt_font_italic {
  font-style: italic;
}

#kdardaenxb .gt_super {
  font-size: 65%;
}

#kdardaenxb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kdardaenxb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kdardaenxb .gt_indent_1 {
  text-indent: 5px;
}

#kdardaenxb .gt_indent_2 {
  text-indent: 10px;
}

#kdardaenxb .gt_indent_3 {
  text-indent: 15px;
}

#kdardaenxb .gt_indent_4 {
  text-indent: 20px;
}

#kdardaenxb .gt_indent_5 {
  text-indent: 25px;
}

#kdardaenxb .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kdardaenxb div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Mediator Associations with Gender x Class</th>
</tr>
<tr class="gt_col_headings even">
<th id="mediator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">mediator</th>
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">term</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="std.error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">std.error</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p.value</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">age</td>
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">34.61176471</td>
<td class="gt_row gt_right" headers="std.error">1.4449924</td>
<td class="gt_row gt_right" headers="p.value">2.517476e-93</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">age</td>
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-5.88879173</td>
<td class="gt_row gt_right" headers="std.error">2.1181089</td>
<td class="gt_row gt_right" headers="p.value">5.576606e-03</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">age</td>
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-12.86176471</td>
<td class="gt_row gt_right" headers="std.error">1.9565290</td>
<td class="gt_row gt_right" headers="p.value">9.521083e-11</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">age</td>
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="estimate">6.66962143</td>
<td class="gt_row gt_right" headers="std.error">1.9609267</td>
<td class="gt_row gt_right" headers="p.value">7.084363e-04</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">age</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-4.65188733</td>
<td class="gt_row gt_right" headers="std.error">2.8348449</td>
<td class="gt_row gt_right" headers="p.value">1.012484e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">age</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-1.91203250</td>
<td class="gt_row gt_right" headers="std.error">2.5073371</td>
<td class="gt_row gt_right" headers="p.value">4.459709e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">-3.75993580</td>
<td class="gt_row gt_right" headers="std.error">1.0110081</td>
<td class="gt_row gt_right" headers="p.value">2.000158e-04</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">0.11013552</td>
<td class="gt_row gt_right" headers="std.error">0.2099824</td>
<td class="gt_row gt_right" headers="p.value">5.999316e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">-3.06524428</td>
<td class="gt_row gt_right" headers="std.error">0.7224447</td>
<td class="gt_row gt_right" headers="p.value">2.206722e-05</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">2.50603244</td>
<td class="gt_row gt_right" headers="std.error">1.2905403</td>
<td class="gt_row gt_right" headers="p.value">5.215556e-02</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">2.14855593</td>
<td class="gt_row gt_right" headers="std.error">0.4492872</td>
<td class="gt_row gt_right" headers="p.value">1.734361e-06</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-10.76997040</td>
<td class="gt_row gt_right" headers="std.error">304.1675632</td>
<td class="gt_row gt_right" headers="p.value">9.717544e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">4.12110186</td>
<td class="gt_row gt_right" headers="std.error">1.0468590</td>
<td class="gt_row gt_right" headers="p.value">8.263211e-05</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">1.23164163</td>
<td class="gt_row gt_right" headers="std.error">0.3145393</td>
<td class="gt_row gt_right" headers="p.value">9.014212e-05</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-13.24966377</td>
<td class="gt_row gt_right" headers="std.error">88.6264645</td>
<td class="gt_row gt_right" headers="p.value">8.811590e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="estimate">0.02027337</td>
<td class="gt_row gt_right" headers="std.error">1.4310457</td>
<td class="gt_row gt_right" headers="p.value">9.886969e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="estimate">0.52159026</td>
<td class="gt_row gt_right" headers="std.error">0.2838296</td>
<td class="gt_row gt_right" headers="p.value">6.610839e-02</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="estimate">-9.18195795</td>
<td class="gt_row gt_right" headers="std.error">70.0952775</td>
<td class="gt_row gt_right" headers="p.value">8.957812e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-1.07476000</td>
<td class="gt_row gt_right" headers="std.error">1.9485714</td>
<td class="gt_row gt_right" headers="p.value">5.812478e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-0.50823691</td>
<td class="gt_row gt_right" headers="std.error">0.5904420</td>
<td class="gt_row gt_right" headers="p.value">3.893627e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">7.74968444</td>
<td class="gt_row gt_right" headers="std.error">92.9190882</td>
<td class="gt_row gt_right" headers="p.value">9.335315e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-0.47910299</td>
<td class="gt_row gt_right" headers="std.error">1.4732814</td>
<td class="gt_row gt_right" headers="p.value">7.450339e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-0.04503512</td>
<td class="gt_row gt_right" headers="std.error">0.4030231</td>
<td class="gt_row gt_right" headers="p.value">9.110270e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">embarked</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">11.56941101</td>
<td class="gt_row gt_right" headers="std.error">85.9327415</td>
<td class="gt_row gt_right" headers="p.value">8.929018e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">family(3+)</td>
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">-1.24593700</td>
<td class="gt_row gt_right" headers="std.error">0.2476239</td>
<td class="gt_row gt_right" headers="p.value">4.864796e-07</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">family(3+)</td>
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">0.53298720</td>
<td class="gt_row gt_right" headers="std.error">0.3477433</td>
<td class="gt_row gt_right" headers="p.value">1.253491e-01</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">family(3+)</td>
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">0.76463382</td>
<td class="gt_row gt_right" headers="std.error">0.3012231</td>
<td class="gt_row gt_right" headers="p.value">1.113511e-02</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">family(3+)</td>
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="estimate">-0.64491337</td>
<td class="gt_row gt_right" headers="std.error">0.3650361</td>
<td class="gt_row gt_right" headers="p.value">7.727660e-02</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="mediator">family(3+)</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="estimate">-0.06352250</td>
<td class="gt_row gt_right" headers="std.error">0.5019686</td>
<td class="gt_row gt_right" headers="p.value">8.992991e-01</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="mediator">family(3+)</td>
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="estimate">-0.54320406</td>
<td class="gt_row gt_right" headers="std.error">0.4292733</td>
<td class="gt_row gt_right" headers="p.value">2.057267e-01</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Indirect effect signal via delta between m0 and m1 on key terms</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>coef_comp <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">term =</span> <span class="fu">intersect</span>(<span class="fu">names</span>(<span class="fu">coef</span>(m0)), <span class="fu">names</span>(<span class="fu">coef</span>(m1))),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">base =</span> <span class="fu">coef</span>(m0)[term],</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">adj  =</span> <span class="fu">coef</span>(m1)[term]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">delta =</span> adj <span class="sc">-</span> base, <span class="at">atten_pct =</span> (<span class="dv">1</span> <span class="sc">-</span> adj<span class="sc">/</span>base) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>coef_comp <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">abs</span>(delta))) <span class="sc">%&gt;%</span> <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Attenuation of Effects After Adding Mediators"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="bsirqmtofd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bsirqmtofd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bsirqmtofd thead, #bsirqmtofd tbody, #bsirqmtofd tfoot, #bsirqmtofd tr, #bsirqmtofd td, #bsirqmtofd th {
  border-style: none;
}

#bsirqmtofd p {
  margin: 0;
  padding: 0;
}

#bsirqmtofd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bsirqmtofd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bsirqmtofd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bsirqmtofd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bsirqmtofd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bsirqmtofd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bsirqmtofd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bsirqmtofd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bsirqmtofd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bsirqmtofd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bsirqmtofd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bsirqmtofd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bsirqmtofd .gt_spanner_row {
  border-bottom-style: hidden;
}

#bsirqmtofd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bsirqmtofd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bsirqmtofd .gt_from_md > :first-child {
  margin-top: 0;
}

#bsirqmtofd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bsirqmtofd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bsirqmtofd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bsirqmtofd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bsirqmtofd .gt_row_group_first td {
  border-top-width: 2px;
}

#bsirqmtofd .gt_row_group_first th {
  border-top-width: 2px;
}

#bsirqmtofd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsirqmtofd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bsirqmtofd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bsirqmtofd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bsirqmtofd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsirqmtofd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bsirqmtofd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bsirqmtofd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bsirqmtofd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bsirqmtofd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bsirqmtofd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsirqmtofd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bsirqmtofd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsirqmtofd .gt_left {
  text-align: left;
}

#bsirqmtofd .gt_center {
  text-align: center;
}

#bsirqmtofd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bsirqmtofd .gt_font_normal {
  font-weight: normal;
}

#bsirqmtofd .gt_font_bold {
  font-weight: bold;
}

#bsirqmtofd .gt_font_italic {
  font-style: italic;
}

#bsirqmtofd .gt_super {
  font-size: 65%;
}

#bsirqmtofd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bsirqmtofd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bsirqmtofd .gt_indent_1 {
  text-indent: 5px;
}

#bsirqmtofd .gt_indent_2 {
  text-indent: 10px;
}

#bsirqmtofd .gt_indent_3 {
  text-indent: 15px;
}

#bsirqmtofd .gt_indent_4 {
  text-indent: 20px;
}

#bsirqmtofd .gt_indent_5 {
  text-indent: 25px;
}

#bsirqmtofd .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#bsirqmtofd div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Attenuation of Effects After Adding Mediators</th>
</tr>
<tr class="gt_col_headings even">
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">term</th>
<th id="base" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">base</th>
<th id="adj" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">adj</th>
<th id="delta" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">delta</th>
<th id="atten_pct" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">atten_pct</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="base">3.4122472</td>
<td class="gt_row gt_right" headers="adj">5.2768594</td>
<td class="gt_row gt_right" headers="delta">1.86461223</td>
<td class="gt_row gt_right" headers="atten_pct">-54.644699</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">sexmale:pclass2nd</td>
<td class="gt_row gt_right" headers="base">-0.1849918</td>
<td class="gt_row gt_right" headers="adj">-0.7656067</td>
<td class="gt_row gt_right" headers="delta">-0.58061492</td>
<td class="gt_row gt_right" headers="atten_pct">-313.859840</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">pclass3rd</td>
<td class="gt_row gt_right" headers="base">-3.4122472</td>
<td class="gt_row gt_right" headers="adj">-3.9778305</td>
<td class="gt_row gt_right" headers="delta">-0.56558331</td>
<td class="gt_row gt_right" headers="atten_pct">-16.575098</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">sexmale</td>
<td class="gt_row gt_right" headers="base">-3.9493901</td>
<td class="gt_row gt_right" headers="adj">-3.5916385</td>
<td class="gt_row gt_right" headers="delta">0.35775163</td>
<td class="gt_row gt_right" headers="atten_pct">9.058402</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">pclass2nd</td>
<td class="gt_row gt_right" headers="base">-0.9555114</td>
<td class="gt_row gt_right" headers="adj">-0.9335109</td>
<td class="gt_row gt_right" headers="delta">0.02200056</td>
<td class="gt_row gt_right" headers="atten_pct">2.302491</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">sexmale:pclass3rd</td>
<td class="gt_row gt_right" headers="base">2.0957553</td>
<td class="gt_row gt_right" headers="adj">2.1174965</td>
<td class="gt_row gt_right" headers="delta">0.02174124</td>
<td class="gt_row gt_right" headers="atten_pct">-1.037394</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="highest-risk-age-group" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Highest-risk age group</h1>
<p>We identify the age group with the lowest predicted survival probability according to the adjusted model.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>age_grid <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">80</span>, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>sex)[<span class="dv">1</span>], <span class="co"># hold as reference</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pclass =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>pclass)[<span class="dv">3</span>], <span class="co"># 3rd class, worst SES</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">family_structure =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>family_structure)[<span class="dv">1</span>],</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">embarked =</span> <span class="fu">levels</span>(model_df<span class="sc">$</span>embarked)[<span class="dv">1</span>]</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>age_grid <span class="ot">&lt;-</span> age_grid <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pred =</span> <span class="fu">plogis</span>(<span class="fu">predict</span>(m1, <span class="at">newdata =</span> age_grid, <span class="at">type =</span> <span class="st">"link"</span>)))</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>age_grid <span class="ot">&lt;-</span> age_grid <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">age_group =</span> <span class="fu">cut</span>(age, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>,<span class="dv">5</span>,<span class="dv">13</span>,<span class="dv">18</span>,<span class="dv">30</span>,<span class="dv">45</span>,<span class="dv">60</span>,<span class="cn">Inf</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0-4"</span>,<span class="st">"5-12"</span>,<span class="st">"13-17"</span>,<span class="st">"18-29"</span>,<span class="st">"30-44"</span>,<span class="st">"45-59"</span>,<span class="st">"60+"</span>)))</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>risk_tbl <span class="ot">&lt;-</span> age_grid <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(age_group) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mean_pred =</span> <span class="fu">mean</span>(pred, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(mean_pred)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>risk_tbl <span class="sc">%&gt;%</span> <span class="fu">gt</span>() <span class="sc">%&gt;%</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Predicted Survival by Age Group (Adjusted Model)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tewhukqxay" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#tewhukqxay table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#tewhukqxay thead, #tewhukqxay tbody, #tewhukqxay tfoot, #tewhukqxay tr, #tewhukqxay td, #tewhukqxay th {
  border-style: none;
}

#tewhukqxay p {
  margin: 0;
  padding: 0;
}

#tewhukqxay .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tewhukqxay .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#tewhukqxay .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tewhukqxay .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tewhukqxay .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tewhukqxay .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tewhukqxay .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tewhukqxay .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tewhukqxay .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tewhukqxay .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tewhukqxay .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tewhukqxay .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tewhukqxay .gt_spanner_row {
  border-bottom-style: hidden;
}

#tewhukqxay .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#tewhukqxay .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tewhukqxay .gt_from_md > :first-child {
  margin-top: 0;
}

#tewhukqxay .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tewhukqxay .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tewhukqxay .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#tewhukqxay .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#tewhukqxay .gt_row_group_first td {
  border-top-width: 2px;
}

#tewhukqxay .gt_row_group_first th {
  border-top-width: 2px;
}

#tewhukqxay .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewhukqxay .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#tewhukqxay .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#tewhukqxay .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tewhukqxay .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewhukqxay .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tewhukqxay .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#tewhukqxay .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tewhukqxay .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tewhukqxay .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tewhukqxay .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewhukqxay .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tewhukqxay .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewhukqxay .gt_left {
  text-align: left;
}

#tewhukqxay .gt_center {
  text-align: center;
}

#tewhukqxay .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tewhukqxay .gt_font_normal {
  font-weight: normal;
}

#tewhukqxay .gt_font_bold {
  font-weight: bold;
}

#tewhukqxay .gt_font_italic {
  font-style: italic;
}

#tewhukqxay .gt_super {
  font-size: 65%;
}

#tewhukqxay .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#tewhukqxay .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#tewhukqxay .gt_indent_1 {
  text-indent: 5px;
}

#tewhukqxay .gt_indent_2 {
  text-indent: 10px;
}

#tewhukqxay .gt_indent_3 {
  text-indent: 15px;
}

#tewhukqxay .gt_indent_4 {
  text-indent: 20px;
}

#tewhukqxay .gt_indent_5 {
  text-indent: 25px;
}

#tewhukqxay .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#tewhukqxay div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border">Predicted Survival by Age Group (Adjusted Model)</th>
</tr>
<tr class="gt_col_headings even">
<th id="age_group" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">age_group</th>
<th id="mean_pred" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean_pred</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="age_group">60+</td>
<td class="gt_row gt_right" headers="mean_pred">0.1618916</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="age_group">45-59</td>
<td class="gt_row gt_right" headers="mean_pred">0.2846715</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="age_group">30-44</td>
<td class="gt_row gt_right" headers="mean_pred">0.4266221</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="age_group">18-29</td>
<td class="gt_row gt_right" headers="mean_pred">0.5665836</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="age_group">13-17</td>
<td class="gt_row gt_right" headers="mean_pred">0.6515897</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="age_group">5-12</td>
<td class="gt_row gt_right" headers="mean_pred">0.7104982</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="age_group">0-4</td>
<td class="gt_row gt_right" headers="mean_pred">0.7672023</td>
</tr>
</tbody>
</table>

</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>risk_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(risk_tbl, <span class="fu">aes</span>(<span class="at">x =</span> age_group, <span class="at">y =</span> mean_pred)) <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"#d62728"</span>) <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Predicted Survival Probability by Age Group"</span>, <span class="at">x =</span> <span class="st">"Age Group"</span>, <span class="at">y =</span> <span class="st">"Predicted Survival Probability"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>risk_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="generalisation-check-train-vs-test" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Generalisation check: Train vs Test</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare distributions train vs test for key features</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>comp_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"sex"</span>,<span class="st">"pclass"</span>,<span class="st">"age"</span>,<span class="st">"sibsp"</span>,<span class="st">"parch"</span>,<span class="st">"embarked"</span>,<span class="st">"fare"</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>train_tag <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(comp_cols)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">split =</span> <span class="st">"train"</span>, <span class="at">pclass =</span> <span class="fu">as.integer</span>(pclass))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>test_tag  <span class="ot">&lt;-</span> test  <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(comp_cols)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">split =</span> <span class="st">"test"</span>,  <span class="at">pclass =</span> <span class="fu">as.integer</span>(pclass))</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>both <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(train_tag, test_tag) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pclass =</span> <span class="fu">factor</span>(pclass, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1st"</span>,<span class="st">"2nd"</span>,<span class="st">"3rd"</span>)),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">sex =</span> <span class="fu">factor</span>(sex), <span class="at">embarked =</span> <span class="fu">factor</span>(embarked))</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(both, <span class="fu">aes</span>(<span class="at">x =</span> pclass, <span class="at">fill =</span> <span class="fu">factor</span>(split))) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Class Distribution: Train vs Test"</span>, <span class="at">fill =</span> <span class="st">"Split"</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(both, <span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">fill =</span> <span class="fu">factor</span>(split))) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Gender Distribution: Train vs Test"</span>, <span class="at">fill =</span> <span class="st">"Split"</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(both, <span class="fu">aes</span>(<span class="at">x =</span> embarked, <span class="at">fill =</span> <span class="fu">factor</span>(split))) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Embarkation: Train vs Test"</span>, <span class="at">fill =</span> <span class="st">"Split"</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(both, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">color =</span> split)) <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Age Density: Train vs Test"</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">|</span> p2) <span class="sc">/</span> (p3 <span class="sc">|</span> p4) <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Train vs Test Distribution Comparison"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the same model on train and score on test (note: test lacks survival). We compare covariate patterns and discuss dataset shift.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># For diagnostics, we compute propensity/predicted survival on test for reference.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Refit adjusted model on train subset with complete cases for used terms</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>model_df2 <span class="ot">&lt;-</span> model_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(age), <span class="sc">!</span><span class="fu">is.na</span>(family_structure))</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>m_final <span class="ot">&lt;-</span> <span class="fu">glm</span>(survived <span class="sc">~</span> sex <span class="sc">*</span> pclass <span class="sc">+</span> age <span class="sc">+</span> family_structure <span class="sc">+</span> embarked, <span class="at">data =</span> model_df2, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Score test set after harmonizing features</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>score_test <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pclass =</span> <span class="fu">factor</span>(pclass, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1st"</span>,<span class="st">"2nd"</span>,<span class="st">"3rd"</span>)),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">sex =</span> <span class="fu">factor</span>(sex), <span class="at">embarked =</span> <span class="fu">fct_explicit_na</span>(<span class="fu">factor</span>(embarked), <span class="st">"Unknown"</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">family_size =</span> <span class="fu">coalesce</span>(sibsp, <span class="dv">0</span>) <span class="sc">+</span> <span class="fu">coalesce</span>(parch, <span class="dv">0</span>),</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">family_structure =</span> <span class="fu">case_when</span>(</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>           family_size <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"solo"</span>,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>           family_size <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"pair"</span>,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>           family_size <span class="sc">&gt;=</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"3+"</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">family_structure =</span> <span class="fu">factor</span>(family_structure, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"solo"</span>,<span class="st">"pair"</span>,<span class="st">"3+"</span>)))</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>score_test <span class="ot">&lt;-</span> score_test <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pred_survival =</span> <span class="fu">plogis</span>(<span class="fu">predict</span>(m_final, <span class="at">newdata =</span> score_test, <span class="at">type =</span> <span class="st">"link"</span>)))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(score_test<span class="sc">$</span>pred_survival)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
0.03375 0.15056 0.29544 0.42177 0.64723 0.98531      86 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare predicted survival distribution vs train actual</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>train_pred <span class="ot">&lt;-</span> model_df2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pred =</span> <span class="fu">plogis</span>(<span class="fu">predict</span>(m_final, <span class="at">type =</span> <span class="st">"link"</span>)))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  train_pred <span class="sc">%&gt;%</span> <span class="fu">transmute</span>(<span class="at">split =</span> <span class="st">"train"</span>, <span class="at">prob =</span> pred),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  score_test <span class="sc">%&gt;%</span> <span class="fu">transmute</span>(<span class="at">split =</span> <span class="st">"test"</span>, <span class="at">prob =</span> pred_survival)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>pp_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pp, <span class="fu">aes</span>(<span class="at">x =</span> prob, <span class="at">color =</span> split)) <span class="sc">+</span> <span class="fu">geom_density</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Predicted Survival Probabilities: Train vs Test"</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>pp_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="20260116_1500_titanic_gender_ses_mediation_age_family_embark_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="narrative-and-interpretation" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Narrative and Interpretation</h1>
<ul>
<li>Gender and SES jointly shape survival with a strong interaction: women have higher survival across classes, but class still matters; 1st class shows the highest survival, especially for women.</li>
<li>After adjusting for age, family structure, and embarkation, the gender x class effects attenuate somewhat, suggesting pathways through these variables (e.g., children prioritized, family travel affecting cabin proximity/evacuation, embarkation reflecting route/cabin location). However, identification for mediation is limited without randomization; we present qualitative evidence.</li>
<li>The highest-risk age group appears among older adults (60+), with notably lower predicted survival probabilities, especially in 3rd class.</li>
<li>Generalisation: Train vs test distributions show modest differences (potential dataset shift) in class and embarkation composition, which can affect predicted survival levels. Predicted survival densities differ slightly, indicating shift in covariate mix.</li>
</ul>
</section>
<section id="reproducibility" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Reproducibility</h1>
<p>Session info and package versions.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.1 (2025-06-13)
Platform: aarch64-apple-darwin20
Running under: macOS Tahoe 26.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1

locale:
[1] C.UTF-8/C.UTF-8/C.UTF-8/C/C.UTF-8/C.UTF-8

time zone: Australia/Melbourne
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] nnet_7.3-20     gt_1.2.0        patchwork_1.3.2 knitr_1.50     
 [5] broom_1.0.11    scales_1.4.0    lubridate_1.9.4 forcats_1.0.0  
 [9] stringr_1.5.2   dplyr_1.1.4     purrr_1.1.0     readr_2.1.5    
[13] tidyr_1.3.1     tibble_3.3.0    ggplot2_4.0.0   tidyverse_2.0.0

loaded via a namespace (and not attached):
 [1] sass_0.4.10        generics_0.1.4     xml2_1.3.8         stringi_1.8.7     
 [5] hms_1.1.3          digest_0.6.37      magrittr_2.0.4     evaluate_1.0.5    
 [9] grid_4.5.1         timechange_0.3.0   RColorBrewer_1.1-3 fastmap_1.2.0     
[13] jsonlite_2.0.0     backports_1.5.0    cli_3.6.5          rlang_1.1.6       
[17] crayon_1.5.3       bit64_4.6.0-1      withr_3.0.2        yaml_2.3.10       
[21] tools_4.5.1        parallel_4.5.1     tzdb_0.5.0         vctrs_0.6.5       
[25] R6_2.6.1           lifecycle_1.0.4    fs_1.6.6           htmlwidgets_1.6.4 
[29] bit_4.6.0          vroom_1.6.5        pkgconfig_2.0.3    pillar_1.11.1     
[33] gtable_0.3.6       glue_1.8.0         xfun_0.55          tidyselect_1.2.1  
[37] farver_2.1.2       htmltools_0.5.8.1  labeling_0.4.3     rmarkdown_2.30    
[41] compiler_4.5.1     S7_0.2.0          </code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>